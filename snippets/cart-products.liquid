{% assign block_settings = block.settings %}

<script
  src="{{ 'component-cart-items.js' | asset_url }}"
  type="module"
  fetchpriority="low"
></script>

<div
  {{ block.shopify_attributes }}
  class="cart-items__wrapper"
  {% if settings.product_title_case == 'uppercase' %}
    style="--product-title-case: uppercase;"
  {% endif %}
>
  {% if cart.empty? %}
    {%- if shop.customer_accounts_enabled and customer == null -%}
      <p>
        {{ 'actions.log_in_html' | t: link: routes.account_login_url }}
      </p>
    {%- endif -%}

    <a
      class="button cart-items__empty-button"
      href="{{ settings.empty_cart_button_link | default: routes.all_products_collection_url }}"
    >
      {{ 'actions.continue_shopping' | t }}
    </a>
  {%- else -%}
    <span
      class="visually-hidden"
      ref="cartItemCount"
      aria-hidden="true"
    >
      {{- cart.item_count -}}
    </span>
    <form
      action="{{ routes.cart_url }}"
      class="cart-form"
      id="cart-form"
      method="post"
    >
      <div
        class="cart-items spacing-style{% if block_settings.dividers %} cart-items--dividers{% endif %}"
        style="{%  render 'spacing-style', settings: block_settings %} --cart-items-gap:{{ block_settings.gap | append: "px" }};"
      >
        {%- comment -%}
          ▽▽ 商品 / 数量 / 金額 のヘッダー行 ▽▽
        {%- endcomment -%}
        {% if request.page_type == 'cart' %}
          <div class="cart-items__header-row">
            <span class="cart-items__header-label cart-items__header-label--spacer"></span>
            <span class="cart-items__header-label cart-items__header-label--product">商品</span>
            <span class="cart-items__header-label cart-items__header-label--qty">数量</span>
            <span class="cart-items__header-label cart-items__header-label--price">金額</span>
          </div>
        {% endif %}

        <table
          class="cart-items__table"
          role="table"
        >
          <caption
            class="visually-hidden"
            role="caption"
          >
            {{ 'content.cart_total' | t }}
            {{ cart.total_price | money }}
            <span class="cart-drawer__tax-label">(税込)</span>
          </caption>

          <thead
            class="visually-hidden"
            role="rowgroup"
          >
            <tr
              role="row"
              class="cart-items__table-row"
            >
              <th
                id="productImage"
                scope="col"
                role="columnheader"
              >
                {{ 'content.product_image' | t }}
              </th>
              <th
                id="productInformation"
                scope="col"
                role="columnheader"
              >
                {{ 'content.product_information' | t }}
              </th>
              <th
                id="quantity"
                scope="col"
                role="columnheader"
              >
                {{ 'content.quantity' | t }}
              </th>
              <th
                id="productTotal"
                scope="col"
                role="columnheader"
              >
                {{ 'content.product_total' | t }}
              </th>
            </tr>
          </thead>

          <tbody role="rowgroup">
            {% for item in cart.items %}
              <tr
                role="row"
                class="cart-items__table-row{% if item.parent_relationship.parent != null %} cart-items__nested-line{% endif %}"
                ref="cartItemRows[]"
                data-parent-key="{{ item.parent_relationship.parent.key }}"
                data-key="{{ item.key }}"
              >
                <td
                  class="cart-items__media"
                  role="cell"
                  headers="productImage"
                >
                  {% if item.image -%}
                    {% liquid
                      assign ratio = 1
                      assign border_opacity = settings.cart_thumbnail_border_opacity | divided_by: 100.0
                      assign border_override = '--border-width: [cart_thumbnail_border_width]px; --border-style: [cart_thumbnail_border_style]; --border-color: rgb(var(--color-border-rgb) / [cart_thumbnail_border_opacity]); --border-radius: [cart_thumbnail_border_radius]px;' | replace: '[cart_thumbnail_border_width]', settings.cart_thumbnail_border_width | replace: '[cart_thumbnail_border_style]', settings.cart_thumbnail_border | replace: '[cart_thumbnail_border_opacity]', border_opacity | replace: '[cart_thumbnail_border_radius]', settings.cart_thumbnail_border_radius

                      if settings.cart_thumbnail_border_radius > 0
                        assign border_override = border_override | append: ' overflow: hidden;'
                      endif
                      if block_settings.image_ratio == 'portrait'
                        assign ratio = 0.8
                      elsif block_settings.image_ratio == 'adapt'
                        assign ratio = item.image.aspect_ratio
                      endif
                    %}
                    <a
                      href="{{ item.url }}"
                      class="cart-items__media-container"
                      style="--ratio:{{ ratio }};"
                    >
                      {%- liquid
                        echo item.image | image_url: width: 250 | image_tag: class: 'cart-items__media-image border-style', style: border_override
                      -%}
                    </a>
                  {%- endif %}
                </td>

                <td
                  class="cart-items__details cart-primary-typography"
                  role="cell"
                  headers="productInformation"
                >
                  {%- comment -%}
                    ▽▽ バッジはここ（タイトルの上）に表示 ▽▽
                  {%- endcomment -%}

                  <div class="cart-item__badges">
                    {% render 'Custom-product-badges',
                      line_item: item,
                      context: 'cart',
                      badge_class: 'rv-badge'
                    %}
                  </div>

                  {% if item.product.vendor and block_settings.vendor %}
                    <p>
                      {{ item.product.vendor }}
                    </p>
                  {% endif %}

                  {%- comment -%} ★ 商品タイトル {%- endcomment -%}
                  <p class="cart-items__title">
                    <a href="{{ item.url }}">
                      {{ item.title }}
                    </a>
                  </p>

                  {%- liquid
                    # バリアントの発売日メタフィールドを取得
                    # メタフィールド定義：namespace「variant」 key「release_date」想定
                    assign release_raw = selected_variant.metafields.variant.release_date
                  -%}
                  {%- if release_raw != blank -%}
                    <p class="cart-items__release-date">
                      {{ release_raw | date: '%Y年%-m月%-d日' }}
                      {%- if is_preorder_template -%}
                        発売予定
                      {%- else -%}
                        発売
                      {%- endif -%}
                    </p>
                  {%- endif -%}

                  {%- if item.item_components.size != 0 -%}
                    <ul class="cart-items__bundle list-unstyled">
                      {%- for component in item.item_components -%}
                        <li>
                          {{- component.title -}}
                          {%- if component.quantity > 1 -%}
                            <span> × {{ component.quantity }}</span>
                          {%- endif -%}
                        </li>
                      {%- endfor -%}
                    </ul>
                  {%- endif -%}

                  {%- if item.product.has_only_default_variant == false
                    or item.properties.size != 0
                    or item.selling_plan_allocation != null
                  -%}
                    <dl class="cart-items__variants">
                      {%- if item.product.has_only_default_variant == false and item.item_components.size == 0 -%}
                        {%- for option in item.options_with_values -%}
                          <div class="cart-items__variant">
                            <dt class="visually-hidden">{{ option.name }}:</dt>
                            <dd>
                              {{- option.value -}}
                              {%- if forloop.last != true %},&nbsp;{% endif -%}
                            </dd>
                          </div>
                        {%- endfor -%}
                      {%- endif -%}

                      {%- for property in item.properties -%}
                        {%- assign property_first_char = property.first | slice: 0 -%}
                        {%- if property.last != blank and property_first_char != '_' -%}
                          <div class="cart-items__properties">
                            <dt>{{ property.first }}:</dt>
                            <dd>
                              {%- if property.last contains '/uploads/' -%}
                                <a href="{{ property.last }}">{{ property.last | split: '/' | last }}</a>
                              {%- else -%}
                                {{ property.last }}
                              {%- endif -%}
                            </dd>
                          </div>
                        {%- endif -%}
                      {%- endfor -%}
                    </dl>

                    {% if item.selling_plan_allocation %}
                      <p>{{ item.selling_plan_allocation.selling_plan.name }}</p>
                    {% endif %}
                  {%- endif -%}

                  {% if item.line_level_discount_allocations.size > 0 %}
                    <ul
                      class="list-unstyled"
                      role="list"
                    >
                      {%- for discount in item.line_level_discount_allocations -%}
                        <li>{{ discount.discount_application.title | escape }}</li>
                      {%- endfor -%}
                    </ul>
                  {% endif %}

                  <div class="cart-items__unit-price">
                    {% if item.original_price != item.final_price %}
                      <span class="visually-hidden">{{ 'content.price_sale' | t }}</span>
                      <span>{{ item.final_price | money }}</span>
                      <span class="visually-hidden">{{ 'content.price_regular' | t }}</span>
                      <s class="compare-at-price">
                        {% if item.variant.compare_at_price > item.original_price %}
                          {{ item.variant.compare_at_price | money }}
                        {% else %}
                          {{ item.original_price | money }}
                        {% endif %}
                      </s>
                    {% else %}
                      {% if item.variant.compare_at_price > item.original_price %}
                        <span class="visually-hidden">{{ 'content.price_sale' | t }}</span>
                      {% else %}
                        <span class="visually-hidden">{{ 'content.price' | t }}</span>
                      {% endif %}

                      <span>{{ item.original_price | money }}</span>

                      {% if item.variant.compare_at_price > item.original_price %}
                        <span class="visually-hidden">{{ 'content.price_regular' | t }}</span>
                        <s class="compare-at-price">{{ item.variant.compare_at_price | money }}</s>
                      {% endif %}
                    {% endif %}
                  </div>
                </td>

                <td
                  class="cart-items__quantity"
                  role="cell"
                  headers="quantity"
                >
                  {% assign can_update_quantity = item.instructions.can_update_quantity
                    | default: true, allow_false: true
                  %}
                  {% render 'quantity-selector',
                    product: item.product,
                    in_cart_quantity: item.quantity,
                    line_index: item.index,
                    min: 0,
                    class: 'cart-primary-typography quantity-selector--cart',
                    can_update_quantity: can_update_quantity
                  %}

                  <button
                    class="button button--tertiary cart-items__remove"
                    type="button"
                    aria-label="{{ 'accessibility.remove_item' | t: title: item.title | escape }}"
                    on:click="/onLineItemRemove/{{ item.index | plus: 1 }}"
                    {% assign can_remove = item.instructions.can_remove | default: true, allow_false: true %}
                    {% if can_remove == false %}
                      hidden
                    {% endif %}
                  >
                    <span class="cart-items__remove-text">削除</span>
                    <span class="visually-hidden">Remove</span>
                  </button>
                </td>

                <td
                  class="cart-items__error hidden"
                  role="cell"
                  ref="cartItemErrorContainer-{{ item.index | plus: 1 }}"
                  headers="quantity"
                >
                  <div
                    class="cart-item__error"
                    role="alert"
                  >
                    <span class="svg-wrapper">
                      {{- 'icon-error.svg' | inline_asset_content -}}
                    </span>
                    <small
                      class="cart-item__error-text cart-primary-typography"
                      ref="cartItemError-{{ item.index | plus: 1 }}"
                    ></small>
                  </div>
                </td>

                <td
                  class="cart-items__price cart-secondary-typography"
                  role="cell"
                  headers="productTotal"
                >
                  {%- liquid
                    if settings.currency_code_enabled_cart_items
                      assign price = item.final_line_price | money_with_currency
                      assign unit_price = item.unit_price | money_with_currency
                    else
                      assign price = item.final_line_price | money
                      assign unit_price = item.unit_price | money
                    endif
                  -%}
                  <div class="cart-items__price-inner">
                    <text-component
                      value="{{ price | strip_html }}"
                      class="cart-items__price-value"
                    >
                      {{ price }}
                    </text-component>
                    <span class="cart-items__price-tax">(税込)</span>
                  </div>
                  {%- if item.unit_price_measurement -%}
                    <div class="cart-items__price-unit cart-secondary-typography">
                      {% render 'unit-price', price: unit_price, measurement: item.unit_price_measurement %}
                    </div>
                  {%- endif -%}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </form>
  {%- endif -%}
</div>
{% stylesheet %}
  /* ──────────────────────────────
   基本レイアウト
────────────────────────────── */
  .cart-items {
    --cart-item-media-width-min: 2.5rem;
    --cart-item-media-width-max: 7.5rem;

    container-name: cart-items;
    container-type: inline-size;
    width: 100%;
  }

  .cart-items-disabled {
    pointer-events: none;
  }

  .cart-items__table {
    width: 100%;
  }

  .cart-items__table * {
    margin: 0;
  }

  /* ──────────────────────────────
   「商品 / 数量 / 金額」ヘッダー行
────────────────────────────── */

  .cart-items__header-row {
    display: none; /* モバイルとドロワーでは非表示。PC だけ Container Query で表示 */
  }

  .cart-items__header-label {
    font-size: var(--cart-font-size--xs);
    color: rgb(var(--color-foreground-rgb) / var(--opacity-70));
  }

  .cart-items__header-label--product {
    flex: 1 1 auto;
    text-align: left;
  }

  .cart-items__header-label--qty {
    flex: 0 0 392.5px;
    text-align: center;
  }

  .cart-items__header-label--price {
    flex: 0 0 6rem;
    text-align: right;
  }

  /* ──────────────────────────────
   行本体：モバイル基準レイアウト
   （価格 → 数量の順で縦に並べる）
────────────────────────────── */

  .cart-items__table-row {
    --cart-item-price-width: 6rem;

    display: grid;
    grid-template-columns: clamp(2.5rem, 15cqi, 7.5rem) minmax(0, 1fr);
    grid-template-areas:
      'media details'
      'media price'
      'media quantity'
      'media error';
    column-gap: var(--gap-md);
    align-items: start;
    padding-bottom: var(--cart-items-gap);
    margin-bottom: var(--margin-lg);
  }

  .cart-items__table-row:last-child {
    padding-bottom: 0;
  }

  .cart-items--dividers .cart-items__table-row {
    border-bottom: 1px solid var(--color-border);
    margin-bottom: var(--cart-items-gap);
  }

  .cart-items--dividers .cart-items__table-row:last-child {
    border-block-end: none;
    padding-block-end: 0;
    margin-bottom: 0;
  }

  .cart-items__media {
    grid-area: media;
    padding: 0;
  }

  .cart-items__details {
    grid-area: details;
    color: rgb(var(--color-foreground-rgb) / var(--opacity-70));
  }

  .cart-items__error {
    grid-area: error;
  }

  .cart-items__price {
    grid-area: price;
    min-height: unset;
    min-width: var(--cart-item-price-width);
    text-align: right;
    display: block;
    font-size: var(--cart-font-size--md);
  }

  .cart-items__quantity {
    grid-area: quantity;
    margin-block-start: var(--margin-xs);
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: var(--gap-xs);
    width: fit-content;
  }

  /* ──────────────────────────────
   PC レイアウト（Cart ページのみ）
   Container 幅 720px 以上で適用
────────────────────────────── */

  @container cart-items (min-width: 720px) {
    /* 商品 / 数量 / 金額 ヘッダーを表示 */
    .cart-items__header-row {
      max-width: 880px;
      margin-inline: auto;
      margin-block-end: var(--margin-xs);
      padding-block-end: var(--padding-xs);
      border-bottom: 1px solid var(--color-border);
      display: flex;
      align-items: flex-end;
      font-size: var(--cart-font-size--xs);
      color: rgb(var(--color-foreground-rgb) / var(--opacity-70));
      margin-bottom: var(--cart-items-gap);
    }

    /* ヘッダーと行を同じ最大幅＆位置に */
    .cart-items__header-row,
    .cart-items__table-row {
      max-width: 880px;
      margin-inline: auto;
    }

    /* 行本体もヘッダーと同じ 4 列グリッドに */
    .cart-items__table-row {
      --cart-item-price-width: 6rem;

      grid-template-columns: 7.5rem minmax(0, 1fr) auto minmax(var(--cart-item-price-width), auto);
      grid-template-rows: min-content 1fr;
      grid-template-areas:
        'media details quantity price'
        'media details error    error';
      align-items: center;
    }

    .cart-items__media {
      grid-area: media;
    }

    /* PC では details を自動配置にしてバッジと画像のツラを合わせる */
    .cart-items__details {
      grid-area: auto;
    }

    .cart-items__error {
      grid-area: error;
    }

    .cart-items__quantity {
      grid-area: quantity;
      margin-top: 0;
      justify-content: center;
    }

    .cart-items__price {
      grid-area: price;
      min-height: var(--minimum-touch-target);
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      justify-content: center;
    }
  }

  /* 1080px 以上で若干広げる（削除ボタンのかぶり防止） */
  @media screen and (min-width: 1080px) {
    .cart-page {
      grid-template-columns: minmax(0, 1fr) !important;
    }

    .cart-items__header-row,
    .cart-items__table-row {
      max-width: 880px;
      margin-inline: auto;
    }
  }

  /* ──────────────────────────────
   モバイル専用（〜749px）
   ・ヘッダー非表示
   ・価格は左寄せ（行頭寄せ）
────────────────────────────── */

  @media screen and (max-width: 749px) {
    .cart-items__header-row {
      display: none;
    }

    .cart-items__price {
      text-align: left;
    }

    .cart-items__price-inner {
      justify-content: flex-start;
    }
  }

  /* ──────────────────────────────
   商品詳細・バッジ・リリース日
────────────────────────────── */

  .cart-items__details > * + *,
  .cart-items__bundle li {
    margin-block-start: var(--margin-2xs);
  }

  .cart-items__details a {
    text-decoration: none;
  }

  .cart-items__title {
    font-size: var(--cart-font-size--md);
    color: var(--color-foreground);
    text-transform: var(--product-title-case);
    font-weight: 600; /* タイトル少し太く */
  }

  .cart-items__title a {
    color: inherit;
  }

  /* バッジ（NEW / 予約受付中 など） */
  .cart-item__badges {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-top: 0;
    margin-bottom: var(--margin-2xs);
  }

  .cart-items__variant {
    display: inline-block;
  }

  /* バリアント情報はタイトル下には出さない */
  .cart-items__variants {
    display: none;
  }

  /* variant.release_date 表示 */
  .cart-items__release-date {
    margin-top: 2px;
    font-size: 11px;
    color: #180600;
  }

  /* 単体価格（タイトル下の ¥○○○○）は PC/SP 共通で非表示 */
  .cart-items__unit-price {
    display: none;
  }

  /* ──────────────────────────────
   数量カウンター＋削除ボタン
────────────────────────────── */

  .cart-items__quantity .quantity-selector {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    border: none;
    border-radius: 0;
    overflow: visible;
  }

  .cart-items__quantity .quantity-selector button {
    min-width: 24px;
    height: 24px;
    border: none;
    background: transparent;
    cursor: pointer;
    font-size: 1.5rem;
    line-height: 1;
  }

  .cart-items__quantity .quantity-selector input[type='number'] {
    box-sizing: border-box;
    width: 50px;
    height: 34px;
    text-align: center;
    padding: 0;
    border-radius: 8px;
    border: 1px solid #dde0e6;
    font-size: 1rem;
  }

  .cart-items__remove {
    background-color: transparent;
    color: #e53935;
    width: auto;
    height: var(--minimum-touch-target);
    justify-content: center;
    box-shadow: none;
    padding: 0 var(--padding-2xs);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    margin-left: 4px;
  }

  .cart-items__remove-text {
    font-size: var(--cart-font-size--sm);
    writing-mode: horizontal-tb;
  }

  .cart-items__remove:hover {
    opacity: 0.8;
  }

  /* ──────────────────────────────
   価格表示（小計）
────────────────────────────── */

  .cart-items__price-inner {
    display: inline-flex;
    align-items: baseline;
    gap: 4px;
    font-weight: 500; /* 少し太め */
    justify-content: flex-end; /* PC 基準：右寄せ */
  }

  /* 金額本体を固定幅＋タブラー数字で揃える */
  .cart-items__price-value {
    display: inline-block;
    min-width: 7rem; /* 桁数が違っても幅を揃える */
    text-align: right;
    font-variant-numeric: tabular-nums;
    -moz-font-feature-settings: 'tnum';
    -webkit-font-feature-settings: 'tnum';
    font-feature-settings: 'tnum';
  }

  .cart-items__price-tax {
    font-size: var(--cart-font-size--xs);
  }

  .cart-items__price-unit {
    font-size: var(--cart-font-size--xs);
  }

  /* ──────────────────────────────
   画像
────────────────────────────── */

  .cart-items__media-container {
    display: flex;
    aspect-ratio: var(--ratio);
    position: relative;
    width: 100%;
    overflow: hidden;
  }

  .cart-items__media-image {
    aspect-ratio: inherit;
    object-fit: cover;
    object-position: center center;
    width: 100%;
    height: auto;
  }

  .cart-items__empty-button {
    margin-top: var(--margin-md);
    padding-inline: var(--padding-4xl);
    padding-block: var(--padding-lg);
  }

  /* ──────────────────────────────
   エラー表示
────────────────────────────── */

  .cart-items__error {
    display: flex;
    align-items: flex-start;
    width: 100%;
    margin-block-start: var(--margin-xs);
    opacity: 1;
    overflow: hidden;
    transform: translateY(0);
    transition: opacity var(--drawer-animation-speed) var(--animation-easing),
      transform var(--drawer-animation-speed) var(--animation-easing);
  }

  .cart-item__error {
    display: flex;
    align-items: flex-start;
    width: 100%;
    font-size: var(--cart-font-size--sm);
    padding-block: var(--padding-2xs);
  }

  .cart-item__error .svg-wrapper {
    flex-shrink: 0;
    width: var(--icon-size-xs);
    height: var(--icon-size-xs);
    margin-inline: var(--margin-3xs) var(--margin-xs);
    margin-block-start: var(--margin-3xs);
  }

  /* ──────────────────────────────
   カートサマリー・ボタン周り（既存ほぼ踏襲）
────────────────────────────── */

  .cart__original-total-container,
  .cart__total-container {
    display: flex;
    flex-direction: column;
  }

  .cart__total-container {
    row-gap: var(--gap-2xs);
  }

  .cart__total-container:has(.cart__installments) {
    row-gap: var(--gap-xs);
  }

  .cart__original-total-container:empty {
    display: none;
  }

  .cart__summary-totals {
    display: flex;
    flex-direction: column;
    gap: var(--gap-xl);
    width: 100%;
    border-block-start: none;
  }

  .cart__summary-totals:has(> :first-child:not(.cart__original-total-container, .cart__total-container)) {
    padding-block-start: 0;
    border-block-start: none;
  }

  @media screen and (min-width: 750px) {
    .cart__summary-totals {
      padding-block-start: 0;
    }
  }

  .cart__original-total-container,
  .cart__original-total-container * {
    font-size: var(--cart-font-size--sm);
  }

  .cart__total {
    font-weight: var(--font-weight-bold);
  }

  .cart__total-label {
    font-size: var(--cart-font-size--sm);
  }

  .cart__total-value {
    font-size: var(--cart-font-size--2xl);
  }

  .cart-primary-typography {
    font-family: var(--cart-primary-font-family);
    font-style: var(--cart-primary-font-style);
    font-weight: var(--cart-primary-font-weight);
  }

  .cart-secondary-typography {
    font-family: var(--cart-secondary-font-family);
    font-style: var(--cart-secondary-font-style);
    font-weight: var(--cart-secondary-font-weight);
  }

  .cart__ctas {
    width: 100%;
    display: grid;
    gap: var(--checkout-button-gap);
    grid-auto-flow: row;
    grid-template-columns: 1fr;
  }

  .cart__additional-checkout-buttons {
    width: 100%;
  }

  .cart__ctas .cart__checkout-button {
    width: 100%;
    height: clamp(25px, var(--height-buy-buttons), 55px);
    padding-inline: var(--padding-4xl);
  }

  shopify-accelerated-checkout-cart {
    --shopify-accelerated-checkout-inline-alignment: center;
    --shopify-accelerated-checkout-button-border-radius: var(--style-border-radius-buttons-primary);
    --shopify-accelerated-checkout-row-gap: var(--checkout-button-gap, 10px);
  }

  .cart-note {
    width: 100%;
  }

  .cart-note__inner {
    padding-block: var(--padding-2xs) var(--padding-sm);
  }

  .cart-note__summary {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .cart-note__summary:hover {
    color: rgb(var(--color-foreground-rgb) / var(--opacity-subdued-text));
  }

  .cart-note__label {
    display: flex;
    align-items: flex-start;
    gap: var(--gap-2xs);
    font-size: var(--cart-font-size--sm);
  }

  .cart-note__instructions {
    color: var(--color-input-text);
    background-color: var(--color-input-background);
    border-width: var(--style-border-width-inputs);
    border-color: var(--color-input-border);
    transition: box-shadow var(--animation-speed) ease;
    box-shadow: var(--input-box-shadow);
    min-height: 5.5rem;
    min-width: 100%;
    max-width: 100%;
    font-size: var(--cart-font-size--sm);
    padding: max(4px, calc(var(--style-border-radius-inputs) * (1 - cos(45deg))));
  }

  .cart-note .svg-wrapper {
    height: var(--icon-size-sm);
    width: var(--icon-size-sm);
    margin: 0;
  }

  .cart-note .icon-plus {
    height: var(--icon-size-xs);
    width: var(--icon-size-xs);
  }

  .cart-items__properties {
    display: block;
    margin-block-start: var(--margin-2xs);
  }

  .cart-items__properties dt,
  .cart-items__properties dd {
    display: inline;
  }

  /* ショッピングカート見出しと「買い物を続ける」ボタン */
  .cart-title__inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    margin: 2rem;
  }

  .cart-title__inner .button {
    background-color: #ffffff;
    color: #e53935;
    border: 1px solid #e53935;
    border-radius: 8px;
    padding-inline: 40px;
    padding-block: 10px;
  }

  .cart__checkout-button.button {
    background-color: #e53935;
    color: #ffffff;
    border-radius: 8px;
    padding-inline: 40px;
    padding-block: 10px;
  }

  .cart-title__inner .cart-bubble {
    display: none !important;
  }

  /* ──────────────────────────────
   ドロワーカート専用の調整
────────────────────────────── */

  /* ドロワーでは「商品 / 数量 / 金額」ヘッダー不要 */
  .cart-drawer .cart-items__header-row {
    display: none !important;
  }

  /* ドロワー内の価格は常に左寄せ */
  .cart-drawer .cart-items__price {
    text-align: left;
    align-items: flex-start;
  }

  .cart-drawer .cart-items__price-inner {
    align-items: flex-start;
    justify-content: flex-start;
  }

  .cart-drawer__tax-label {
    margin-left: 4px;
    font-size: 0.75em;
  }

  @media screen and (max-width: 800px) {
    .cart-items__price-value {
      min-width: auto;
    }
    .cart-drawer .cart-items__price {
      text-align: right;
    }
  }
{% endstylesheet %}
