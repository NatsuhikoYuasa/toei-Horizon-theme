{% comment %}
  Contact form section for dedicated template
{% endcomment %}

{{ 'section-toei-contact-form.css' | asset_url | stylesheet_tag }}

<section class="toei-contact" id="ContactFormWrapper">
  <div class="page-width toei-contact__inner">
    <div class="toei-contact__header">
      <h1 class="toei-contact__title">お問い合わせ</h1>
      {% if section.settings.description != blank %}
        <div class="toei-contact__description rte">{{ section.settings.description }}</div>
      {% endif %}
    </div>

    <div class="toei-contact__card">
      {% form 'contact', id: 'ContactForm' %}
        {% if form.posted_successfully? %}
          <div class="toei-contact__alert toei-contact__alert--success" role="status">
            {{ 'contact.form.post_success' | t }}
          </div>
        {% elsif form.errors %}
          <div class="toei-contact__alert toei-contact__alert--error" role="alert">
            <ul>
              {% for field in form.errors %}
                <li>{{ form.errors.messages[field] }}</li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}

        <div class="toei-contact__rows">
          <div class="toei-contact__row">
            <div class="toei-contact__labelWrap">
              <span class="toei-contact__badge">必須</span>
              <label for="ContactCategory" class="toei-contact__label">お問い合わせ内容（種別）</label>
            </div>
            <div class="toei-contact__field">
              <select id="ContactCategory" name="contact[category]" required class="toei-contact__input">
                <option value="" disabled selected>選択してください</option>
                <option value="商品について">商品について</option>
                <option value="ご注文について">ご注文について</option>
                <option value="配送について">配送について</option>
                <option value="その他">その他</option>
              </select>
            </div>
          </div>

          <div class="toei-contact__row toei-contact__row--textarea">
            <div class="toei-contact__labelWrap">
              <span class="toei-contact__badge">必須</span>
              <label for="ContactBody" class="toei-contact__label">お問い合わせ内容（本文）</label>
            </div>
            <div class="toei-contact__field">
              <textarea id="ContactBody" name="contact[body]" rows="6" class="toei-contact__input" required></textarea>
            </div>
          </div>

          <div class="toei-contact__row toei-contact__row--name">
            <div class="toei-contact__labelWrap">
              <span class="toei-contact__badge">必須</span>
              <label for="ContactLastName" class="toei-contact__label">氏名</label>
            </div>
            <div class="toei-contact__field toei-contact__field--name">
              <div class="toei-contact__nameInput">
                <input id="ContactLastName" type="text" name="contact[last_name]" class="toei-contact__input" placeholder="姓" required>
              </div>
              <div class="toei-contact__nameInput">
                <input id="ContactFirstName" type="text" name="contact[first_name]" class="toei-contact__input" placeholder="名" required>
              </div>
            </div>
          </div>

          <div class="toei-contact__row">
            <div class="toei-contact__labelWrap">
              <span class="toei-contact__badge">必須</span>
              <label for="ContactEmail" class="toei-contact__label">メールアドレス</label>
            </div>
            <div class="toei-contact__field">
              <input id="ContactEmail" type="email" name="contact[email]" class="toei-contact__input" required>
            </div>
          </div>

          <div class="toei-contact__row">
            <div class="toei-contact__labelWrap">
              <span class="toei-contact__badge">必須</span>
              <label for="ContactPhone" class="toei-contact__label">電話番号</label>
            </div>
            <div class="toei-contact__field">
              <input id="ContactPhone" type="tel" name="contact[phone]" class="toei-contact__input" required>
            </div>
          </div>
        </div>

        <div class="toei-contact__actions">
          {% if section.settings.back_link != blank %}
            <a class="toei-contact__button toei-contact__button--secondary" href="{{ section.settings.back_link }}">戻る</a>
          {% endif %}
          <button type="submit" class="toei-contact__button toei-contact__button--primary">
            {{ section.settings.submit_label | default: '確認する' }}
          </button>
        </div>
      {% endform %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "お問い合わせフォーム",
  "tag": "section",
  "settings": [
    {
      "type": "richtext",
      "id": "description",
      "label": "説明文",
      "default": "<p>ご不明な点はお気軽にお問い合わせください。<a href=\"/pages/faq\" title=\"よくある質問\">よくある質問</a>もご確認ください。</p>"
    },
    {
      "type": "url",
      "id": "back_link",
      "label": "戻るボタンのリンクURL"
    },
    {
      "type": "text",
      "id": "submit_label",
      "label": "確認ボタンの文言",
      "default": "確認する"
    }
  ],
  "presets": [
    {
      "name": "お問い合わせフォーム"
    }
  ]
}
{% endschema %}
